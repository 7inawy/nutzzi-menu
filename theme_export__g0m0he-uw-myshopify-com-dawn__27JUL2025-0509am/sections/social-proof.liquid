{{ 'component-social-proof.css' | asset_url | stylesheet_tag }}

<script src="{{ 'social-proof.js' | asset_url }}" defer="defer"></script>

{%- style -%}
  .section-{{ section.id }}-social-proof {
    --social-proof-spacing: {{ section.settings.spacing }}px;
    --social-proof-columns: {{ section.settings.columns_desktop }};
    --social-proof-columns-mobile: {{ section.settings.columns_mobile }};
  }

  {% if section.settings.hide_on_mobile %}
    @media screen and (max-width: 749px) {
      .section-{{ section.id }}-social-proof {
        display: none;
      }
    }
  {% endif %}
{%- endstyle -%}

<div class="section-{{ section.id }}-social-proof">
  <div class="page-width section-{{ section.id }}-padding">
    {% if section.settings.heading != blank %}
      <div class="social-proof__header text-center">
        <h2 class="social-proof__heading {{ section.settings.heading_size }}">
          {{ section.settings.heading | escape }}
        </h2>
        {% if section.settings.subheading != blank %}
          <div class="social-proof__subheading rte">
            {{ section.settings.subheading }}
          </div>
        {% endif %}
      </div>
    {% endif %}

    <social-proof
      class="social-proof"
      data-section="{{ section.id }}"
      data-layout="{{ section.settings.layout }}"
      data-autoplay="{{ section.settings.autoplay }}"
      data-autoplay-speed="{{ section.settings.autoplay_speed }}"
      data-show-arrows="{{ section.settings.show_arrows }}"
      data-show-dots="{{ section.settings.show_dots }}"
      {% if section.settings.hide_on_mobile %}data-hide-mobile="true"{% endif %}
    >
      <div class="social-proof__container">
        {% if section.settings.layout == 'slider' %}
          <div class="social-proof__slider">
            <ul class="social-proof__list slider slider--tablet" role="list">
              {% for block in section.blocks %}
                {% case block.type %}
                  {% when 'testimonial' %}
                    <li class="social-proof__item slider__slide" {{ block.shopify_attributes }}>
                      <div class="social-proof__testimonial">
                        {% if block.settings.image %}
                          <div class="social-proof__image">
                            <img
                              src="{{ block.settings.image | image_url: width: 100 }}"
                              alt="{{ block.settings.image.alt | escape }}"
                              loading="lazy"
                              width="{{ block.settings.image.width }}"
                              height="{{ block.settings.image.height }}"
                            >
                          </div>
                        {% endif %}
                        
                        {% if block.settings.rating > 0 %}
                          <div class="social-proof__rating">
                            {% for i in (1..5) %}
                              <span class="social-proof__star{% if i <= block.settings.rating %} social-proof__star--filled{% endif %}">
                                {%- render 'icon-star' -%}
                              </span>
                            {% endfor %}
                          </div>
                        {% endif %}

                        {% if block.settings.quote != blank %}
                          <blockquote class="social-proof__quote">
                            {{ block.settings.quote }}
                          </blockquote>
                        {% endif %}

                        {% if block.settings.author != blank %}
                          <cite class="social-proof__author">
                            {{ block.settings.author }}
                          </cite>
                        {% endif %}

                        {% if block.settings.company != blank %}
                          <div class="social-proof__company">
                            {{ block.settings.company }}
                          </div>
                        {% endif %}
                      </div>
                    </li>
                  {% when 'review' %}
                    <li class="social-proof__item slider__slide" {{ block.shopify_attributes }}>
                      <div class="social-proof__review">
                        {% if block.settings.product %}
                          <div class="social-proof__product">
                            <img
                              src="{{ block.settings.product.featured_image | image_url: width: 80 }}"
                              alt="{{ block.settings.product.title | escape }}"
                              loading="lazy"
                              width="80"
                              height="80"
                            >
                            <h4 class="social-proof__product-title">
                              {{ block.settings.product.title }}
                            </h4>
                          </div>
                        {% endif %}

                        {% if block.settings.rating > 0 %}
                          <div class="social-proof__rating">
                            {% for i in (1..5) %}
                              <span class="social-proof__star{% if i <= block.settings.rating %} social-proof__star--filled{% endif %}">
                                {%- render 'icon-star' -%}
                              </span>
                            {% endfor %}
                            <span class="social-proof__rating-text">{{ block.settings.rating }}/5</span>
                          </div>
                        {% endif %}

                        {% if block.settings.review_text != blank %}
                          <div class="social-proof__review-text">
                            {{ block.settings.review_text }}
                          </div>
                        {% endif %}

                        {% if block.settings.reviewer_name != blank %}
                          <div class="social-proof__reviewer">
                            {{ block.settings.reviewer_name }}
                          </div>
                        {% endif %}
                      </div>
                    </li>
                  {% when 'trust_indicator' %}
                    <li class="social-proof__item slider__slide" {{ block.shopify_attributes }}>
                      <div class="social-proof__trust-indicator">
                        {% if block.settings.icon %}
                          <div class="social-proof__icon">
                            <img
                              src="{{ block.settings.icon | image_url: width: 60 }}"
                              alt="{{ block.settings.icon.alt | escape }}"
                              loading="lazy"
                              width="60"
                              height="60"
                            >
                          </div>
                        {% endif %}

                        {% if block.settings.title != blank %}
                          <h3 class="social-proof__trust-title">
                            {{ block.settings.title }}
                          </h3>
                        {% endif %}

                        {% if block.settings.description != blank %}
                          <div class="social-proof__trust-description">
                            {{ block.settings.description }}
                          </div>
                        {% endif %}

                        {% if block.settings.stat != blank %}
                          <div class="social-proof__stat">
                            {{ block.settings.stat }}
                          </div>
                        {% endif %}
                      </div>
                    </li>
                {% endcase %}
              {% endfor %}
            </ul>

            {% if section.settings.show_arrows %}
              <button type="button" class="social-proof__arrow social-proof__arrow--prev" aria-label="{{ 'accessibility.previous_slide' | t }}">
                {%- render 'icon-caret' -%}
              </button>
              <button type="button" class="social-proof__arrow social-proof__arrow--next" aria-label="{{ 'accessibility.next_slide' | t }}">
                {%- render 'icon-caret' -%}
              </button>
            {% endif %}
          </div>

          {% if section.settings.show_dots %}
            <div class="social-proof__dots">
              {% for block in section.blocks %}
                <button type="button" class="social-proof__dot{% if forloop.first %} social-proof__dot--active{% endif %}" data-slide="{{ forloop.index0 }}" aria-label="{{ 'accessibility.go_to_slide' | t: number: forloop.index }}">
                  <span class="visually-hidden">{{ forloop.index }}</span>
                </button>
              {% endfor %}
            </div>
          {% endif %}
        {% else %}
          <div class="social-proof__grid">
            <ul class="social-proof__list grid grid--{{ section.settings.columns_mobile }}-col-tablet-down grid--{{ section.settings.columns_desktop }}-col-desktop" role="list">
              {% for block in section.blocks %}
                {% case block.type %}
                  {% when 'testimonial' %}
                    <li class="social-proof__item grid__item" {{ block.shopify_attributes }}>
                      <div class="social-proof__testimonial">
                        {% if block.settings.image %}
                          <div class="social-proof__image">
                            <img
                              src="{{ block.settings.image | image_url: width: 100 }}"
                              alt="{{ block.settings.image.alt | escape }}"
                              loading="lazy"
                              width="{{ block.settings.image.width }}"
                              height="{{ block.settings.image.height }}"
                            >
                          </div>
                        {% endif %}
                        
                        {% if block.settings.rating > 0 %}
                          <div class="social-proof__rating">
                            {% for i in (1..5) %}
                              <span class="social-proof__star{% if i <= block.settings.rating %} social-proof__star--filled{% endif %}">
                                {%- render 'icon-star' -%}
                              </span>
                            {% endfor %}
                          </div>
                        {% endif %}

                        {% if block.settings.quote != blank %}
                          <blockquote class="social-proof__quote">
                            {{ block.settings.quote }}
                          </blockquote>
                        {% endif %}

                        {% if block.settings.author != blank %}
                          <cite class="social-proof__author">
                            {{ block.settings.author }}
                          </cite>
                        {% endif %}

                        {% if block.settings.company != blank %}
                          <div class="social-proof__company">
                            {{ block.settings.company }}
                          </div>
                        {% endif %}
                      </div>
                    </li>
                  {% when 'review' %}
                    <li class="social-proof__item grid__item" {{ block.shopify_attributes }}>
                      <div class="social-proof__review">
                        {% if block.settings.product %}
                          <div class="social-proof__product">
                            <img
                              src="{{ block.settings.product.featured_image | image_url: width: 80 }}"
                              alt="{{ block.settings.product.title | escape }}"
                              loading="lazy"
                              width="80"
                              height="80"
                            >
                            <h4 class="social-proof__product-title">
                              {{ block.settings.product.title }}
                            </h4>
                          </div>
                        {% endif %}

                        {% if block.settings.rating > 0 %}
                          <div class="social-proof__rating">
                            {% for i in (1..5) %}
                              <span class="social-proof__star{% if i <= block.settings.rating %} social-proof__star--filled{% endif %}">
                                {%- render 'icon-star' -%}
                              </span>
                            {% endfor %}
                            <span class="social-proof__rating-text">{{ block.settings.rating }}/5</span>
                          </div>
                        {% endif %}

                        {% if block.settings.review_text != blank %}
                          <div class="social-proof__review-text">
                            {{ block.settings.review_text }}
                          </div>
                        {% endif %}

                        {% if block.settings.reviewer_name != blank %}
                          <div class="social-proof__reviewer">
                            {{ block.settings.reviewer_name }}
                          </div>
                        {% endif %}
                      </div>
                    </li>
                  {% when 'trust_indicator' %}
                    <li class="social-proof__item grid__item" {{ block.shopify_attributes }}>
                      <div class="social-proof__trust-indicator">
                        {% if block.settings.icon %}
                          <div class="social-proof__icon">
                            <img
                              src="{{ block.settings.icon | image_url: width: 60 }}"
                              alt="{{ block.settings.icon.alt | escape }}"
                              loading="lazy"
                              width="60"
                              height="60"
                            >
                          </div>
                        {% endif %}

                        {% if block.settings.title != blank %}
                          <h3 class="social-proof__trust-title">
                            {{ block.settings.title }}
                          </h3>
                        {% endif %}

                        {% if block.settings.description != blank %}
                          <div class="social-proof__trust-description">
                            {{ block.settings.description }}
                          </div>
                        {% endif %}

                        {% if block.settings.stat != blank %}
                          <div class="social-proof__stat">
                            {{ block.settings.stat }}
                          </div>
                        {% endif %}
                      </div>
                    </li>
                {% endcase %}
              {% endfor %}
            </ul>
          </div>
        {% endif %}
      </div>
    </social-proof>
  </div>
</div>

{% schema %}
{
  "name": "t:sections.social_proof.name",
  "tag": "section",
  "class": "section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "t:sections.social_proof.settings.heading.label",
      "default": "t:sections.social_proof.settings.heading.default"
    },
    {
      "type": "select",
      "id": "heading_size",
      "options": [
        {
          "value": "h2",
          "label": "t:sections.all.heading_size.options__1.label"
        },
        {
          "value": "h1",
          "label": "t:sections.all.heading_size.options__2.label"
        },
        {
          "value": "h0",
          "label": "t:sections.all.heading_size.options__3.label"
        }
      ],
      "default": "h1",
      "label": "t:sections.all.heading_size.label"
    },
    {
      "type": "richtext",
      "id": "subheading",
      "label": "t:sections.social_proof.settings.subheading.label"
    },
    {
      "type": "select",
      "id": "layout",
      "options": [
        {
          "value": "grid",
          "label": "t:sections.social_proof.settings.layout.options__1.label"
        },
        {
          "value": "slider",
          "label": "t:sections.social_proof.settings.layout.options__2.label"
        }
      ],
      "default": "grid",
      "label": "t:sections.social_proof.settings.layout.label"
    },
    {
      "type": "range",
      "id": "columns_desktop",
      "min": 1,
      "max": 4,
      "step": 1,
      "default": 3,
      "label": "t:sections.social_proof.settings.columns_desktop.label"
    },
    {
      "type": "range",
      "id": "columns_mobile",
      "min": 1,
      "max": 2,
      "step": 1,
      "default": 1,
      "label": "t:sections.social_proof.settings.columns_mobile.label"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "default": true,
      "label": "t:sections.social_proof.settings.autoplay.label"
    },
    {
      "type": "range",
      "id": "autoplay_speed",
      "min": 3,
      "max": 10,
      "step": 1,
      "default": 5,
      "unit": "s",
      "label": "t:sections.social_proof.settings.autoplay_speed.label"
    },
    {
      "type": "checkbox",
      "id": "show_arrows",
      "default": true,
      "label": "t:sections.social_proof.settings.show_arrows.label"
    },
    {
      "type": "checkbox",
      "id": "show_dots",
      "default": true,
      "label": "t:sections.social_proof.settings.show_dots.label"
    },
    {
      "type": "range",
      "id": "spacing",
      "min": 20,
      "max": 60,
      "step": 10,
      "default": 40,
      "unit": "px",
      "label": "t:sections.social_proof.settings.spacing.label"
    },
    {
      "type": "checkbox",
      "id": "hide_on_mobile",
      "default": false,
      "label": "t:sections.social_proof.settings.hide_on_mobile.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.padding.header"
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "default": 36,
      "unit": "px",
      "label": "t:sections.all.padding.padding_top.label"
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "default": 36,
      "unit": "px",
      "label": "t:sections.all.padding.padding_bottom.label"
    }
  ],
  "blocks": [
    {
      "type": "testimonial",
      "name": "t:sections.social_proof.blocks.testimonial.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "image",
          "label": "t:sections.social_proof.blocks.testimonial.settings.image.label"
        },
        {
          "type": "range",
          "id": "rating",
          "min": 0,
          "max": 5,
          "step": 1,
          "default": 5,
          "label": "t:sections.social_proof.blocks.testimonial.settings.rating.label"
        },
        {
          "type": "textarea",
          "id": "quote",
          "label": "t:sections.social_proof.blocks.testimonial.settings.quote.label",
          "default": "t:sections.social_proof.blocks.testimonial.settings.quote.default"
        },
        {
          "type": "text",
          "id": "author",
          "label": "t:sections.social_proof.blocks.testimonial.settings.author.label",
          "default": "t:sections.social_proof.blocks.testimonial.settings.author.default"
        },
        {
          "type": "text",
          "id": "company",
          "label": "t:sections.social_proof.blocks.testimonial.settings.company.label"
        }
      ]
    },
    {
      "type": "review",
      "name": "t:sections.social_proof.blocks.review.name",
      "settings": [
        {
          "type": "product",
          "id": "product",
          "label": "t:sections.social_proof.blocks.review.settings.product.label"
        },
        {
          "type": "range",
          "id": "rating",
          "min": 1,
          "max": 5,
          "step": 1,
          "default": 5,
          "label": "t:sections.social_proof.blocks.review.settings.rating.label"
        },
        {
          "type": "textarea",
          "id": "review_text",
          "label": "t:sections.social_proof.blocks.review.settings.review_text.label",
          "default": "t:sections.social_proof.blocks.review.settings.review_text.default"
        },
        {
          "type": "text",
          "id": "reviewer_name",
          "label": "t:sections.social_proof.blocks.review.settings.reviewer_name.label",
          "default": "t:sections.social_proof.blocks.review.settings.reviewer_name.default"
        }
      ]
    },
    {
      "type": "trust_indicator",
      "name": "t:sections.social_proof.blocks.trust_indicator.name",
      "settings": [
        {
          "type": "image_picker",
          "id": "icon",
          "label": "t:sections.social_proof.blocks.trust_indicator.settings.icon.label"
        },
        {
          "type": "text",
          "id": "title",
          "label": "t:sections.social_proof.blocks.trust_indicator.settings.title.label",
          "default": "t:sections.social_proof.blocks.trust_indicator.settings.title.default"
        },
        {
          "type": "textarea",
          "id": "description",
          "label": "t:sections.social_proof.blocks.trust_indicator.settings.description.label",
          "default": "t:sections.social_proof.blocks.trust_indicator.settings.description.default"
        },
        {
          "type": "text",
          "id": "stat",
          "label": "t:sections.social_proof.blocks.trust_indicator.settings.stat.label"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "t:sections.social_proof.presets.name",
      "blocks": [
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        },
        {
          "type": "testimonial"
        }
      ]
    }
  ]
}
{% endschema %} 